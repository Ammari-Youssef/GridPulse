<!-- features/settings/profile-settings/profile-settings.component.html -->
<div class="max-w-2xl">
    <h2 class="text-xl font-bold text-gray-800 mb-4">Personal Information</h2>
    <p class="text-sm text-gray-600 mb-6">Update your personal details</p>

    <form [formGroup]="profileForm" (ngSubmit)="onSave()">

        <!-- First Name & Last Name -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
            <mat-form-field appearance="outline" class="w-full">
                <mat-label>First Name</mat-label>
                <input matInput formControlName="firstname" required>
                <mat-icon matPrefix>person</mat-icon>
                <mat-error *ngIf="profileForm.get('firstname')?.hasError('required')">
                    First name is required
                </mat-error>
            </mat-form-field>

            <mat-form-field appearance="outline" class="w-full">
                <mat-label>Last Name</mat-label>
                <input matInput formControlName="lastname" required>
                <mat-icon matPrefix>person</mat-icon>
                <mat-error *ngIf="profileForm.get('lastname')?.hasError('required')">
                    Last name is required
                </mat-error>
            </mat-form-field>
        </div>

        <!-- Email (Read-only) -->
        <mat-form-field appearance="outline" class="w-full mb-4">
            <mat-label>Email Address</mat-label>
            <input matInput type="email" formControlName="email">
            <mat-icon matPrefix>email</mat-icon>
            <mat-hint>Email cannot be changed</mat-hint>
        </mat-form-field>

        <!-- Role Badge (Read-only, styled) -->
        <div class="mb-6">
            <label class="block text-sm font-medium text-gray-700 mb-2" for="role">Role</label>
            <div class="flex items-center gap-3">
                <span [class]="getRoleBadgeColor()" id="role"
                    class="inline-flex items-center gap-2 px-4 py-2 rounded-lg text-white font-medium">
                    <mat-icon class="text-lg">
                        {{ profileForm.get('role')?.value === 'ADMIN' ? 'admin_panel_settings' : 'person' }}
                    </mat-icon>
                    {{ getRoleLabel() }}
                </span>
                <span class="text-xs text-gray-500">Your role cannot be changed</span>
            </div>
        </div>

        <!-- Action Buttons -->
        <div class="flex gap-3">
            <button type="submit" mat-raised-button color="primary" [disabled]="loading || profileForm.invalid">
                <mat-icon *ngIf="!loading">save</mat-icon>
                <mat-spinner *ngIf="loading" diameter="20"></mat-spinner>
                {{ loading ? 'Saving...' : 'Save Changes' }}
            </button>

            <button type="button" mat-stroked-button (click)="onCancel()" [disabled]="loading">
                Cancel
            </button>
        </div>

    </form>
</div>
